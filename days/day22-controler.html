<!doctype html>
<html>
  <head>
    <script src="https://code.createjs.com/easeljs-0.8.0.min.js"> </script>
    <script src="https://code.createjs.com/tweenjs-0.6.2.min.js"> </script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"> </script>
    <title>Canvas Animation</title>
    <style>
      #canvas {border: solid 1px black; background-color: lightblue;}
    </style>
  </head> 
  <body>
    <canvas id="canvas"></canvas>
    <script >
      var socket = io(location.origin);
      var ID;
      var sprite;
          stage = new createjs.Stage("canvas");
          canvas = document.querySelector('canvas');
          canvas.width = window.innerWidth-50;
          canvas.height = window.innerHeight-50;
      socket.on('user done', function(X,Y, UserID){
        //ID = UserID;
        console.log('yes');
        var spriteSheet = new createjs.SpriteSheet({
            images: ["http://savepic.ru/13767000.png"],
            frames: {width: 120, height: 120, count: 24},
            animations: {stand: 3}});
        sprite = new createjs.Sprite(spriteSheet, 1);
        stage.addChild(sprite);
        sprite.x = X;
        sprite.y = Y;
        createjs.Ticker.addEventListener("tick", onTickHandler);
        //socket.emit('user controler done',  window[UserId].x,  window[UserId].y)
      });
      sprite.mousedown(function(evt){
             sprite.getBounds();
      });
       
      
      
      
      
      //socket.on('sprite change coord', function(UserId, value){
         // window[UserId].x += value;  
     // }); 
      
     
      
      socket.on('user disconnected', function(UserId){
        stage.removeChild(sprite);
      });
      
    
      function onTickHandler(evt) {   
          stage.update();
        };
      window.addEventListener('resize', onResize, false);
      onResize();
      function onResize() {
        canvas.width = window.innerWidth-50;
        canvas.height = window.innerHeight-50;
      };
      
    
    /* function CreateSprite(Id,X,Y){
      var spriteSheet = new createjs.SpriteSheet({
          images: ["http://savepic.ru/13767000.png"],
          frames: {width: 120, height: 120, count: 24},
          animations: {stand: 3}});
      window[Id] = new createjs.Sprite(spriteSheet, 1);
      stage.addChild(window[Id]);
      window[Id].x = X;
      window[Id].y = Y;
      createjs.Ticker.addEventListener("tick", onTickHandler);
      };  */      
    </script>
  </body>
</html>
